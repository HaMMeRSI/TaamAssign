using Newtonsoft.Json.Linq;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Library
{
    public class HebCal
    {
        private static List<HebCalItem> HolidayList { get; set; }

        static HebCal()
        {
            HolidayList = new List<HebCalItem>();
            // JObject HebCalResponse = RESTReader.GET(@"http://www.hebcal.com/hebcal/?v=1&cfg=json&maj=on&min=on&mod=on&nx=off&year=now&month=x&ss=off&mf=off&c=off&geo=none&m=50&s=off&o=off");
            JObject HebCalResponse = JObject.Parse(@"{""date"":""2017 - 12 - 14T18: 57:01 - 00:00"",""items"":[{""title"":""Chanukah: 8th Day"",""hebrew"":""חנוכה: יום ח׳"",""subcat"":""major"",""memo"":""The Jewish festival of rededication, also known as the Festival of Lights"",""category"":""holiday"",""date"":""2017 - 01 - 01"",""link"":""http://www.hebcal.com/holidays/chanukah""},{""link"":""http://www.hebcal.com/holidays/tu-bishvat"",""date"":""2017-02-11"",""category"":""holiday"",""memo"":""New Year for Trees"",""subcat"":""minor"",""hebrew"":""טו בשבט"",""title"":""Tu BiShvat""},{""date"":""2017-03-11"",""link"":""http://www.hebcal.com/holidays/purim"",""hebrew"":""ערב פורים"",""title"":""Erev Purim"",""category"":""holiday"",""memo"":""Purim is one of the most joyous and fun holidays on the Jewish calendar"",""subcat"":""major""},{""hebrew"":""פורים"",""title"":""Purim"",""category"":""holiday"",""memo"":""Purim is one of the most joyous and fun holidays on the Jewish calendar"",""subcat"":""major"",""date"":""2017-03-12"",""link"":""http://www.hebcal.com/holidays/purim""},{""link"":""http://www.hebcal.com/holidays/shushan-purim"",""date"":""2017-03-13"",""subcat"":""minor"",""memo"":""Purim celebrated in Jerusalem and walled cities"",""category"":""holiday"",""title"":""Shushan Purim"",""hebrew"":""שושן פורים""},{""date"":""2017-04-10"",""link"":""http://www.hebcal.com/holidays/pesach"",""title"":""Erev Pesach"",""hebrew"":""ערב פסח"",""category"":""holiday"",""memo"":""Passover, the Feast of Unleavened Bread""},{""title"":""Pesach I"",""date"":""2017-04-11"",""link"":""http://www.hebcal.com/holidays/pesach"",""hebrew"":""פסח יום א׳"",""category"":""holiday"",""memo"":""Passover, the Feast of Unleavened Bread"",""subcat"":""major"",""yomtov"":true},{""category"":""holiday"",""memo"":""Passover, the Feast of Unleavened Bread"",""subcat"":""major"",""yomtov"":true,""hebrew"":""פסח יום ב׳"",""link"":""http://www.hebcal.com/holidays/pesach"",""date"":""2017-04-12"",""title"":""Pesach II""},{""date"":""2017-04-13"",""link"":""http://www.hebcal.com/holidays/pesach"",""title"":""Pesach III (CH''M)"",""hebrew"":""פסח יום ג׳ (חול המועד)"",""subcat"":""major"",""category"":""holiday"",""memo"":""Passover, the Feast of Unleavened Bread""},{""link"":""http://www.hebcal.com/holidays/pesach"",""date"":""2017-04-14"",""category"":""holiday"",""memo"":""Passover, the Feast of Unleavened Bread"",""subcat"":""major"",""hebrew"":""פסח יום ד׳ (חול המועד)"",""title"":""Pesach IV (CH''M)""},{""link"":""http://www.hebcal.com/holidays/pesach"",""date"":""2017-04-15"",""memo"":""Passover, the Feast of Unleavened Bread"",""category"":""holiday"",""subcat"":""major"",""hebrew"":""פסח יום ה׳ (חול המועד)"",""title"":""Pesach V (CH''M)""},{""date"":""2017-04-16"",""link"":""http://www.hebcal.com/holidays/pesach"",""title"":""Pesach VI (CH''M)"",""hebrew"":""פסח יום ו׳ (חול המועד)"",""subcat"":""major"",""category"":""holiday"",""memo"":""Passover, the Feast of Unleavened Bread""},{""title"":""Pesach VII"",""date"":""2017-04-17"",""link"":""http://www.hebcal.com/holidays/pesach"",""hebrew"":""פסח יום ז׳"",""yomtov"":true,""subcat"":""major"",""category"":""holiday"",""memo"":""Passover, the Feast of Unleavened Bread""},{""hebrew"":""פסח יום ח׳"",""category"":""holiday"",""memo"":""Passover, the Feast of Unleavened Bread"",""yomtov"":true,""subcat"":""major"",""date"":""2017-04-18"",""link"":""http://www.hebcal.com/holidays/pesach"",""title"":""Pesach VIII""},{""title"":""Yom HaShoah"",""hebrew"":""יום השואה"",""subcat"":""modern"",""category"":""holiday"",""memo"":""Holocaust Memorial Day"",""date"":""2017-04-24"",""link"":""http://www.hebcal.com/holidays/yom-hashoah""},{""date"":""2017-05-01"",""link"":""http://www.hebcal.com/holidays/yom-hazikaron"",""title"":""Yom HaZikaron"",""hebrew"":""יום הזכרון"",""subcat"":""modern"",""category"":""holiday"",""memo"":""Israeli Memorial Day""},{""title"":""Yom HaAtzma'ut"",""hebrew"":""יום העצמאות"",""subcat"":""modern"",""category"":""holiday"",""memo"":""Israeli Independence Day"",""date"":""2017-05-02"",""link"":""http://www.hebcal.com/holidays/yom-haatzmaut""},{""link"":""http://www.hebcal.com/holidays/pesach-sheni"",""date"":""2017-05-10"",""subcat"":""minor"",""memo"":""Second Passover, one month after Passover"",""category"":""holiday"",""title"":""Pesach Sheni"",""hebrew"":""פסח שני""},{""category"":""holiday"",""memo"":""33rd day of counting the Omer"",""subcat"":""minor"",""hebrew"":""ל״ג בעומר"",""title"":""Lag BaOmer"",""link"":""http://www.hebcal.com/holidays/lag-baomer"",""date"":""2017-05-14""},{""category"":""holiday"",""memo"":""Jerusalem Day"",""subcat"":""modern"",""hebrew"":""יום ירושלים"",""title"":""Yom Yerushalayim"",""link"":""http://www.hebcal.com/holidays/yom-yerushalayim"",""date"":""2017-05-24""},{""title"":""Erev Shavuot"",""hebrew"":""ערב שבועות"",""memo"":""Festival of Weeks, commemorates the giving of the Torah at Mount Sinai"",""category"":""holiday"",""date"":""2017-05-30"",""link"":""http://www.hebcal.com/holidays/shavuot""},{""title"":""Shavuot I"",""link"":""http://www.hebcal.com/holidays/shavuot"",""date"":""2017-05-31"",""memo"":""Festival of Weeks, commemorates the giving of the Torah at Mount Sinai"",""category"":""holiday"",""subcat"":""major"",""yomtov"":true,""hebrew"":""שבועות יום א׳""},{""title"":""Shavuot II"",""link"":""http://www.hebcal.com/holidays/shavuot"",""date"":""2017-06-01"",""category"":""holiday"",""memo"":""Festival of Weeks, commemorates the giving of the Torah at Mount Sinai"",""yomtov"":true,""subcat"":""major"",""hebrew"":""שבועות יום ב׳""},{""subcat"":""major"",""category"":""holiday"",""memo"":""The Ninth of Av, fast commemorating the destruction of the two Temples"",""title"":""Erev Tish'a B'Av"",""hebrew"":""ערב תשעה באב"",""link"":""http://www.hebcal.com/holidays/tisha-bav"",""date"":""2017-07-31""},{""subcat"":""major"",""memo"":""The Ninth of Av, fast commemorating the destruction of the two Temples"",""category"":""holiday"",""title"":""Tish'a B'Av"",""hebrew"":""תשעה באב"",""link"":""http://www.hebcal.com/holidays/tisha-bav"",""date"":""2017-08-01""},{""title"":""Tu B'Av"",""hebrew"":""טו באב"",""subcat"":""minor"",""category"":""holiday"",""memo"":""Jewish holiday of love, similar to Valentine's Day"",""date"":""2017-08-07"",""link"":""http://www.hebcal.com/holidays/tu-bav""},{""link"":""http://www.hebcal.com/holidays/leil-selichot"",""date"":""2017-09-16"",""category"":""holiday"",""memo"":""Prayers for forgiveness in preparation for the High Holidays"",""subcat"":""minor"",""hebrew"":""סליחות"",""title"":""Leil Selichot""},{""date"":""2017-09-20"",""link"":""http://www.hebcal.com/holidays/rosh-hashana"",""hebrew"":""ערב ראש השנה"",""title"":""Erev Rosh Hashana"",""memo"":""The Jewish New Year"",""category"":""holiday""},{""hebrew"":""ראש השנה 5778"",""title"":""Rosh Hashana 5778"",""category"":""holiday"",""memo"":""The Jewish New Year"",""yomtov"":true,""date"":""2017-09-21"",""link"":""http://www.hebcal.com/holidays/rosh-hashana""},{""date"":""2017-09-22"",""link"":""http://www.hebcal.com/holidays/rosh-hashana"",""hebrew"":""ראש השנה יום ב׳"",""yomtov"":true,""subcat"":""major"",""memo"":""The Jewish New Year"",""category"":""holiday"",""title"":""Rosh Hashana II""},{""category"":""holiday"",""memo"":""Day of Atonement"",""hebrew"":""ערב יום כפור"",""title"":""Erev Yom Kippur"",""link"":""http://www.hebcal.com/holidays/yom-kippur"",""date"":""2017-09-29""},{""title"":""Yom Kippur"",""subcat"":""major"",""yomtov"":true,""category"":""holiday"",""memo"":""Day of Atonement"",""hebrew"":""יום כפור"",""link"":""http://www.hebcal.com/holidays/yom-kippur"",""date"":""2017-09-30""},{""title"":""Erev Sukkot"",""hebrew"":""ערב סוכות"",""category"":""holiday"",""memo"":""Feast of Tabernacles"",""date"":""2017-10-04"",""link"":""http://www.hebcal.com/holidays/sukkot""},{""title"":""Sukkot I"",""hebrew"":""סוכות יום א׳"",""memo"":""Feast of Tabernacles"",""category"":""holiday"",""subcat"":""major"",""yomtov"":true,""date"":""2017-10-05"",""link"":""http://www.hebcal.com/holidays/sukkot""},{""title"":""Sukkot II"",""link"":""http://www.hebcal.com/holidays/sukkot"",""date"":""2017-10-06"",""yomtov"":true,""subcat"":""major"",""memo"":""Feast of Tabernacles"",""category"":""holiday"",""hebrew"":""סוכות יום ב׳""},{""date"":""2017-10-07"",""link"":""http://www.hebcal.com/holidays/sukkot"",""title"":""Sukkot III (CH''M)"",""hebrew"":""סוכות יום ג׳ (חול המועד)"",""subcat"":""major"",""memo"":""Feast of Tabernacles"",""category"":""holiday""},{""subcat"":""major"",""category"":""holiday"",""memo"":""Feast of Tabernacles"",""title"":""Sukkot IV (CH''M)"",""hebrew"":""סוכות יום ד׳ (חול המועד)"",""link"":""http://www.hebcal.com/holidays/sukkot"",""date"":""2017-10-08""},{""date"":""2017-10-09"",""link"":""http://www.hebcal.com/holidays/sukkot"",""hebrew"":""סוכות יום ה׳ (חול המועד)"",""title"":""Sukkot V (CH''M)"",""category"":""holiday"",""memo"":""Feast of Tabernacles"",""subcat"":""major""},{""title"":""Sukkot VI (CH''M)"",""hebrew"":""סוכות יום ו׳ (חול המועד)"",""subcat"":""major"",""category"":""holiday"",""memo"":""Feast of Tabernacles"",""date"":""2017-10-10"",""link"":""http://www.hebcal.com/holidays/sukkot""},{""link"":""http://www.hebcal.com/holidays/sukkot"",""date"":""2017-10-11"",""memo"":""Feast of Tabernacles"",""category"":""holiday"",""subcat"":""major"",""hebrew"":""סוכות יום ז׳ (הושענא רבה)"",""title"":""Sukkot VII (Hoshana Raba)""},{""hebrew"":""שמיני עצרת"",""subcat"":""major"",""yomtov"":true,""category"":""holiday"",""memo"":""Eighth Day of Assembly"",""date"":""2017-10-12"",""link"":""http://www.hebcal.com/holidays/shmini-atzeret"",""title"":""Shmini Atzeret""},{""title"":""Simchat Torah"",""subcat"":""major"",""yomtov"":true,""memo"":""Day of Celebrating the Torah"",""category"":""holiday"",""hebrew"":""שמחת תורה"",""link"":""http://www.hebcal.com/holidays/simchat-torah"",""date"":""2017-10-13""},{""subcat"":""modern"",""category"":""holiday"",""memo"":""Recognizes Aliyah, immigration to the Jewish State of Israel"",""title"":""Yom HaAliyah"",""hebrew"":""יום העלייה"",""link"":""http://www.hebcal.com/holidays/yom-haaliyah"",""date"":""2017-10-27""},{""date"":""2017-11-18"",""link"":""http://www.hebcal.com/holidays/sigd"",""title"":""Sigd"",""hebrew"":""סיגד"",""subcat"":""modern"",""memo"":""Ethiopian Jewish holiday occurring 50 days after Yom Kippur"",""category"":""holiday""},{""link"":""http://www.hebcal.com/holidays/chanukah"",""date"":""2017-12-12"",""category"":""holiday"",""memo"":""The Jewish festival of rededication, also known as the Festival of Lights"",""subcat"":""major"",""hebrew"":""חנוכה: א׳ נר"",""title"":""Chanukah: 1 Candle""},{""hebrew"":""חנוכה: ב׳ נרות"",""title"":""Chanukah: 2 Candles"",""category"":""holiday"",""memo"":""The Jewish festival of rededication, also known as the Festival of Lights"",""subcat"":""major"",""date"":""2017-12-13"",""link"":""http://www.hebcal.com/holidays/chanukah""},{""date"":""2017-12-14"",""link"":""http://www.hebcal.com/holidays/chanukah"",""title"":""Chanukah: 3 Candles"",""hebrew"":""חנוכה: ג׳ נרות"",""subcat"":""major"",""memo"":""The Jewish festival of rededication, also known as the Festival of Lights"",""category"":""holiday""},{""link"":""http://www.hebcal.com/holidays/chanukah"",""date"":""2017-12-15"",""category"":""holiday"",""memo"":""The Jewish festival of rededication, also known as the Festival of Lights"",""subcat"":""major"",""hebrew"":""חנוכה: ד׳ נרות"",""title"":""Chanukah: 4 Candles""},{""memo"":""The Jewish festival of rededication, also known as the Festival of Lights"",""category"":""holiday"",""subcat"":""major"",""hebrew"":""חנוכה: ה׳ נרות"",""title"":""Chanukah: 5 Candles"",""link"":""http://www.hebcal.com/holidays/chanukah"",""date"":""2017-12-16""},{""hebrew"":""חנוכה: ו׳ נרות"",""title"":""Chanukah: 6 Candles"",""memo"":""The Jewish festival of rededication, also known as the Festival of Lights"",""category"":""holiday"",""subcat"":""major"",""date"":""2017-12-17"",""link"":""http://www.hebcal.com/holidays/chanukah""},{""date"":""2017-12-18"",""link"":""http://www.hebcal.com/holidays/chanukah"",""title"":""Chanukah: 7 Candles"",""hebrew"":""חנוכה: ז׳ נרות"",""subcat"":""major"",""category"":""holiday"",""memo"":""The Jewish festival of rededication, also known as the Festival of Lights""},{""memo"":""The Jewish festival of rededication, also known as the Festival of Lights"",""category"":""holiday"",""subcat"":""major"",""hebrew"":""חנוכה: ח׳ נרות"",""title"":""Chanukah: 8 Candles"",""link"":""http://www.hebcal.com/holidays/chanukah"",""date"":""2017-12-19""},{""date"":""2017-12-20"",""link"":""http://www.hebcal.com/holidays/chanukah"",""hebrew"":""חנוכה: יום ח׳"",""title"":""Chanukah: 8th Day"",""category"":""holiday"",""memo"":""The Jewish festival of rededication, also known as the Festival of Lights"",""subcat"":""major""}],""link"":""http://www.hebcal.com/hebcal/?v=1;maj=on;min=on;mod=on;nx=off;year=2017;month=x;ss=off;mf=off;c=off;geo=none;s=off;o=off"",""title"":""Hebcal 2017"",""location"":{""geo"":""none""}}");
            foreach (JObject item in (HebCalResponse["items"] as JArray))
            {
                HolidayList.Add(new HebCalItem(DateTime.Parse(item["date"].ToString()), item["title"].ToString(), item["hebrew"].ToString()));
            }
        }

        public bool IsDateHitsHoliday(DateTime date)
        {
            foreach (HebCalItem item in HolidayList)
            {
                if(date == item.Date) {
                    return true;
                }
            }

            return false;
        }
    }

    public class HebCalItem
    {
        public DateTime Date { get; set; }
        public string Title { get; set; }
        public string Hebrew { get; set; }

        public HebCalItem(DateTime Date, string Title, string Hebrew)
        {
            this.Date = Date;
            this.Title = Title;
            this.Hebrew = Hebrew;
        }
    }

}
